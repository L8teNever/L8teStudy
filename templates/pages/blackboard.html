{% extends "base.html" %}

{% block title %}Schwarzes Brett - L8teStudy{% endblock %}
{% block current_page %}blackboard{% endblock %}
{% block page_title %}Infos{% endblock %}

{% block fab %}
{% if user.is_admin or user.is_super_admin %}
<button class="fab visible" id="main-fab" onclick="openCreateBlackboardSheet()" aria-label="Neue Info erstellen">
    <i data-lucide="plus" aria-hidden="true"></i>
</button>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', async function () {
        try {
            lucide.createIcons();
            window.currentUser = {
                name: "{{ user.username }}",
                is_admin: {{ 'true' if user.is_admin else 'false' }
        },
        is_super_admin: { { 'true' if user.is_super_admin else 'false' } },
        className: "{{ active_class.name if active_class else (user.school_class.name if user.school_class else '') }}",
            class_id: { { active_class.id if active_class else (user.class_id if user.class_id else 0) }}
            };
    await renderBlackboard();
        } catch (e) {
        console.error('Error initializing blackboard page:', e);
    }
    });
</script>
{% endblock %}