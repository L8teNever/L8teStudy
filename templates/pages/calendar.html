{% extends "base.html" %}

{% block title %}Kalender - L8teStudy{% endblock %}
{% block current_page %}calendar{% endblock %}
{% block page_title %}Kalender{% endblock %}

{% block fab %}
<button class="fab visible" id="main-fab" onclick="openCreateEventSheet()" aria-label="Neues Ereignis erstellen">
    <i data-lucide="plus" aria-hidden="true"></i>
</button>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', async function () {
        try {
            lucide.createIcons();
            window.currentUser = {
                name: "{{ user.username }}",
                email: "{{ user.username }}@l8testudy.app",
                darkMode: {{ 'true' if user.dark_mode else 'false' }
        },
        theme: "{{ user.theme or 'standard' }}",
            language: "{{ user.language or 'de' }}",
                is_admin: { { 'true' if user.is_admin else 'false' } },
        is_super_admin: { { 'true' if user.is_super_admin else 'false' } },
        role: "{{ user.role }}",
            className: "{{ active_class.name if active_class else (user.school_class.name if user.school_class else '') }}",
                class_id: { { active_class.id if active_class else (user.class_id if user.class_id else 0) }}
            };
    window.currentUserId = {{ user.id }};
    await renderCalendar();
        } catch (e) {
        console.error('Error initializing calendar page:', e);
    }
    });
</script>
{% endblock %}