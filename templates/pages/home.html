{% extends "base.html" %}

{% block title %}Home - L8teStudy{% endblock %}
{% block current_page %}home{% endblock %}
{% block page_title %}Home{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', async function () {
        try {
            lucide.createIcons();
            window.currentUser = {
                name: "{{ user.username }}",
                email: "{{ user.username }}@l8testudy.app",
                darkMode: {{ 'true' if user.dark_mode else 'false' }
        },
        theme: "{{ user.theme or 'standard' }}",
            language: "{{ user.language or 'de' }}",
                is_admin: { { 'true' if user.is_admin else 'false' } },
        is_super_admin: { { 'true' if user.is_super_admin else 'false' } },
        role: "{{ user.role }}",
            needs_password_change: { { 'true' if user.needs_password_change else 'false' } },
        has_seen_tutorial: { { 'true' if user.has_seen_tutorial else 'false' } },
        className: "{{ active_class.name if active_class else (user.school_class.name if user.school_class else '') }}",
            class_id: { { active_class.id if active_class else (user.class_id if user.class_id else 0) }}
            };
    window.currentUserId = {{ user.id }};
    await renderHome();
        } catch (e) {
        console.error('Error initializing home page:', e);
    }
    });
</script>
{% endblock %}